<template>
	<div class="page">
        <NavHeader :isHiddenTitle="true">
        	<h2>鸭掌L/A2兴达12(BM0005)<br/><span>交易中 09/26  13:45:46</span></h2>
        </NavHeader>
        <div class="content">
            <TopNews></TopNews>
            <div class="mt10 dapan-info">
                <div class="dapan-info-left">
                    <h1>288.99</h1>
                    <h5>
                        <span>+3.60</span>
                        <span>+1.28%</span>
                    </h5>
                </div>
                <div class="dapan-info-right">
                    <ul class="col-x-3">
                        <li>开盘<strong>284.40</strong></li>
                        <li>均价<strong>284.40</strong></li>
                        <li>成交额<strong>1542(万)</strong></li>
                        <li>昨日<strong>284.40</strong></li>
                        <li>内盘<strong>425</strong></li>
                        <li>涨停<strong>312.84</strong></li>
                    </ul>
                </div>
            </div>
            <div class="dapan-info-more">
                <ul class="col-x-5">
                    <li>最高价<strong>189.36</strong></li>
                    <li>最低价<strong>137.22</strong></li>
                    <li>成交量<strong>1769638</strong></li>
                    <li>外盘<strong>-----</strong></li>
                    <li>跌停<strong>255.96</strong></li>
                </ul>
            </div>
            <div class="mt10" style="height: 1.9rem; background-color: #fff;">
                <canvas class="kLine" style="height:100%;width:100%;"></canvas>
            </div>
            <div class="mt10" style="height: 1.9rem; background-color: #fff;">
                <canvas class="trend" style="height:100%;width:100%;"></canvas>
            </div>
            <div class="jjpan mt10">
                <div class="jjpan-left">
                    <table class="wudang">
                        <tbody>
                            <tr>
                                <td colspan="3" class="caption tc fb">买盘信息</td>
                            </tr>
                            <tr>
                                <td class="tl">卖5</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖4</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖3</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖2</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖1</td>
                                <td class="tc red fb">173.62</td>
                                <td class="tr fb">103269</td>
                            </tr>
                            <tr>
                                <td colspan="3" class="caption tc fb">卖盘信息</td>
                            </tr>
                            <tr>
                                <td class="tl">卖5</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖4</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖3</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖2</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr>
                                <td class="tl">卖1</td>
                                <td class="tc red">173.62</td>
                                <td class="tr">103269</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="jjpan-right">
                    <table class="wudang">
                        <tbody>
                            <tr>
                                <td colspan="3" class="caption fb">
                                    <span class="fr">当前可售量：35698</span> 在线竞价
                                </td>
                            </tr>
                            <tr>
                                <th class="tl">买家</th>
                                <th class="tc">价格</th>
                                <th class="tr">数量</th>
                            </tr>
                            <tr class="fb">
                                <td class="tl">买家出价1</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr class="fb">
                                <td class="tl">买家出价2</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                            <tr class="fb">
                                <td class="tl">买家出价3</td>
                                <td class="tc red">198.24</td>
                                <td class="tr">669</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="jjpan-buy">
                        <ul>
                            <li>
                                <span>买家价格</span>
                                <input type="text" placeholder="请输入买入价格">
                            </li>
                            <li>
                                <span>买入数量</span>
                                <input type="text" placeholder="请输入买入数量">
                            </li>
                            <li class="btn">
                                <a href="login.html">
                                    <button type="button">在线竞价</button>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
	import TopNews from '../components/TopNews.vue';
	import NavHeader from '../components/NavHeader.vue';
	export default {
		components :{
			TopNews ,
			NavHeader,
		},
		methods : {
			
		},
		mounted(){
    var trend = JSON.parse('{"data":{"trend":{"fields":["min_time","last_px","business_amount","business_balance","avg_px"],"crc":{"600570.SS":20171127},"600570.SS":[[201711270930,49.33,32300,1593359,49.33],[201711270931,49.38,196800,9742419,49.50],[201711270932,49.57,237300,11746628,49.50],[201711270933,49.45,305600,15129460,49.51],[201711270934,49.34,408575,20212267,49.47],[201711270935,49.11,541600,26766994,49.42],[201711270936,49.18,726700,35883434,49.38],[201711270937,49.72,904637,44662421,49.37],[201711270938,49.93,1197637,59288827,49.50],[201711270939,49.88,1285637,63685741,49.54],[201711270940,49.93,1364937,67638929,49.55],[201711270941,50.33,1631149,80999348,49.66],[201711270942,50.08,1778849,88421676,49.71],[201711270943,50.15,1852149,92094405,49.72],[201711270944,49.98,1928249,95904286,49.74],[201711270945,49.73,1975449,98255345,49.74],[201711270946,49.60,2063649,102632527,49.73],[201711270947,49.93,2120649,105468821,49.73],[201711270948,49.95,2169649,107915227,49.74],[201711270949,49.98,2232549,111057576,49.74],[201711270950,49.94,2291549,114006425,49.75],[201711270951,49.82,2349549,116901248,49.75],[201711270952,49.93,2386024,118720793,49.76],[201711270953,49.93,2404924,119664514,49.76],[201711270954,49.92,2429424,120888290,49.76],[201711270955,49.88,2462124,122520204,49.76],[201711270956,49.87,2484905,123655563,49.76],[201711270957,49.89,2532184,126014292,49.77],[201711270958,49.95,2561284,127467106,49.77],[201711270959,50.05,2635784,131190844,49.77],[201711271000,50.15,2683784,133597448,49.78],[201711271001,49.98,2731084,135967848,49.79],[201711271002,49.82,2770105,137914856,49.79],[201711271003,49.95,2804784,139644569,49.79],[201711271004,50.02,2848884,141848991,49.79],[201711271005,50.08,2896484,144231985,49.80],[201711271006,50.00,2942284,146521652,49.80],[201711271007,49.85,3002984,149553927,49.80],[201711271008,50.02,3075384,153170254,49.81],[201711271009,50.00,3135284,156168970,49.81],[201711271010,50.04,3155784,157194500,49.81],[201711271011,49.97,3181084,158459691,49.81],[201711271012,49.95,3194384,159124126,49.81],[201711271013,49.97,3205384,159673787,49.81],[201711271014,49.99,3224984,160653070,49.82],[201711271015,49.93,3233684,161087658,49.82],[201711271016,49.85,3294984,164144896,49.82],[201711271017,49.66,3349003,166833553,49.82],[201711271018,49.66,3430784,170887920,49.81],[201711271019,49.77,3480984,173381736,49.81],[201711271020,49.78,3493984,174028709,49.81],[201711271021,49.78,3519984,175322855,49.81],[201711271022,49.77,3526284,175636533,49.81],[201711271023,49.90,3532284,175935634,49.81],[201711271024,49.90,3546384,176639228,49.81],[201711271025,49.96,3561284,177383115,49.81],[201711271026,49.98,3577484,178192643,49.81],[201711271027,50.00,3613384,179986932,49.81],[201711271028,49.93,3625884,180611735,49.81],[201711271029,49.95,3639584,181296051,49.81],[201711271030,49.93,3642384,181435864,49.81],[201711271031,49.88,3657984,182214255,49.81],[201711271032,49.86,3666184,182623073,49.81],[201711271033,49.87,3675184,183071872,49.81],[201711271034,49.87,3685984,183610414,49.81],[201711271035,49.85,3706084,184612842,49.81],[201711271036,49.94,3728284,185720940,49.81],[201711271037,49.90,3738584,186234993,49.81],[201711271038,49.94,3748284,186719412,49.81],[201711271039,49.95,3771084,187858532,49.82],[201711271040,50.01,3821984,190403207,49.82],[201711271041,50.10,3914084,195014971,49.82],[201711271042,50.14,3977284,198184619,49.83],[201711271043,49.99,4039084,201279452,49.83],[201711271044,49.95,4065484,202598660,49.83],[201711271045,49.86,4127584,205695307,49.83],[201711271046,50.00,4143484,206488670,49.83],[201711271047,49.95,4195484,209087063,49.84],[201711271048,49.96,4252084,211913870,49.84],[201711271049,50.00,4271384,212878714,49.84],[201711271050,50.10,4301484,214385577,49.84],[201711271051,50.05,4342284,216428800,49.84],[201711271052,50.03,4354884,217059140,49.84],[201711271053,50.00,4362684,217449186,49.84],[201711271054,50.06,4374084,218019772,49.84],[201711271055,50.08,4400084,219321622,49.84],[201711271056,50.09,4424284,220533684,49.85],[201711271057,50.07,4444284,221534993,49.85],[201711271058,49.99,4469184,222780814,49.85],[201711271059,50.00,4481584,223400748,49.85],[201711271100,50.02,4492984,223970900,49.85],[201711271101,50.00,4531584,225901325,49.85],[201711271102,49.95,4564284,227536006,49.85],[201711271103,49.91,4608284,229733651,49.85],[201711271104,49.90,4636763,231154943,49.85],[201711271105,49.95,4647463,231689263,49.85],[201711271106,50.00,4655363,232084017,49.85],[201711271107,49.89,4681484,233387644,49.85],[201711271108,49.85,4718784,235247929,49.85],[201711271109,49.85,4730084,235811218,49.85],[201711271110,49.82,4738484,236229890,49.85],[201711271111,49.71,4756084,237106118,49.85],[201711271112,49.70,4777884,238189678,49.85],[201711271113,49.75,4806684,239620676,49.85],[201711271114,49.63,4856284,242084499,49.85],[201711271115,49.64,4892984,243905910,49.85],[201711271116,49.64,4917584,245126646,49.85],[201711271117,49.77,4952184,246845394,49.85],[201711271118,49.75,4966984,247581265,49.85],[201711271119,49.75,4973984,247929486,49.85],[201711271120,49.77,4983684,248412315,49.85],[201711271121,49.79,4993784,248915112,49.84],[201711271122,49.76,5002384,249343109,49.84],[201711271123,49.76,5017384,250089490,49.84],[201711271124,49.77,5026084,250522453,49.84],[201711271125,49.78,5042584,251343847,49.84],[201711271126,49.80,5047084,251567933,49.84],[201711271127,49.79,5065484,252484203,49.84],[201711271128,49.80,5072884,252852689,49.84],[201711271129,49.78,5077984,253106637,49.84],[201711271130,49.77,5090584,253733899,49.84],[201711271301,49.77,5108684,254634812,49.84],[201711271302,49.67,5122984,255345713,49.84],[201711271303,49.70,5125884,255489828,49.84],[201711271304,49.75,5128084,255599206,49.84],[201711271305,49.65,5158384,257104184,49.84],[201711271306,49.58,5169584,257659829,49.84],[201711271307,49.58,5175084,257932535,49.84],[201711271308,49.62,5189584,258652049,49.84],[201711271309,49.60,5205684,259450834,49.84],[201711271310,49.58,5217684,260045960,49.84],[201711271311,49.50,5300463,264144367,49.83],[201711271312,49.50,5324984,265358584,49.83],[201711271313,49.48,5333784,265793970,49.83],[201711271314,49.46,5353484,266768456,49.83],[201711271315,49.51,5389463,268548603,49.83],[201711271316,49.59,5413363,269733690,49.83],[201711271317,49.57,5422963,270209638,49.83],[201711271318,49.59,5432363,270675803,49.83],[201711271319,49.58,5435463,270829537,49.83],[201711271320,49.62,5444663,271285737,49.83],[201711271321,49.60,5465563,272322902,49.83],[201711271322,49.53,5474563,272769059,49.82],[201711271323,49.50,5490763,273571070,49.82],[201711271324,49.50,5510463,274546178,49.82],[201711271325,49.46,5536884,275853268,49.82],[201711271326,49.44,5562884,277138767,49.82],[201711271327,49.42,5583784,278171643,49.82],[201711271328,49.43,5601584,279051156,49.82],[201711271329,49.44,5610429,279488283,49.82],[201711271330,49.50,5630629,280487746,49.81],[201711271331,49.56,5650929,281493654,49.81],[201711271332,49.55,5660629,281974350,49.81],[201711271333,49.50,5673429,282607948,49.81],[201711271334,49.41,5711884,284509511,49.81],[201711271335,49.35,5746884,286237487,49.81],[201711271336,49.44,5823884,290038603,49.80],[201711271337,49.48,5848084,291236122,49.80],[201711271338,49.43,5867884,292215092,49.80],[201711271339,49.38,5878184,292723892,49.80],[201711271340,49.29,5930284,295292557,49.79],[201711271341,49.35,5939984,295770869,49.79],[201711271342,49.31,5961384,296826004,49.79],[201711271343,49.31,5968684,297185932,49.79],[201711271344,49.28,5988084,298142311,49.79],[201711271345,49.20,6015584,299496024,49.79],[201711271346,49.15,6081984,302760924,49.78],[201711271347,49.15,6219184,309504603,49.77],[201711271348,49.22,6240484,310552351,49.76],[201711271349,49.22,6259784,311502597,49.76],[201711271350,49.23,6284284,312708469,49.76],[201711271351,49.26,6294584,313215559,49.76],[201711271352,49.17,6326784,314800554,49.76],[201711271353,49.19,6337684,315336535,49.76],[201711271354,49.17,6350184,315951399,49.75],[201711271355,49.21,6366884,316772575,49.75],[201711271356,49.23,6381684,317501141,49.75],[201711271357,49.18,6403884,318593366,49.75],[201711271358,49.07,6505284,323573206,49.74],[201711271359,49.11,6564384,326472917,49.73],[201711271400,49.13,6613958,328907186,49.73],[201711271401,49.12,6630858,329737827,49.73],[201711271402,49.10,6655758,330961519,49.73],[201711271403,49.00,6865658,341251917,49.70],[201711271404,49.00,6973084,346510237,49.69],[201711271405,48.95,7051184,350334954,49.68],[201711271406,48.86,7092084,352334556,49.68],[201711271407,48.79,7208384,358008932,49.67],[201711271408,48.88,7321384,363525333,49.65],[201711271409,48.90,7377791,366283208,49.65],[201711271410,48.95,7420591,368377040,49.64],[201711271411,48.98,7462791,370443104,49.64],[201711271412,49.10,7568629,375629274,49.63],[201711271413,48.99,7632391,378755683,49.62],[201711271414,49.00,7650491,379642573,49.62]]}}}');
    // console.log(trend.data.trend);
    trend = JSON.parse('{"data":{"trend":{"fields":["min_time","last_px","business_amount","business_balance","avg_px"],"crc":{"600570.SS":20171128},"600570.SS":[[201711280930,48.47,28200,1366854,48.47],[201711280931,48.60,90000,4367676,48.53],[201711280932,48.69,134900,6552328,48.57],[201711280933,48.57,170500,8284010,48.59],[201711280934,48.64,219800,10678152,48.58],[201711280935,48.80,288900,14043238,48.61],[201711280936,48.88,348000,16931891,48.65],[201711280937,48.75,416200,20260255,48.68],[201711280938,48.79,460900,22439823,48.69],[201711280939,48.68,532100,25910138,48.69],[201711280940,48.58,563100,27417546,48.69],[201711280941,48.54,624200,30384254,48.68],[201711280942,48.58,670800,32647491,48.67],[201711280943,48.70,727100,35383860,48.66],[201711280944,48.73,760700,37020250,48.67],[201711280945,48.71,812400,39539888,48.67],[201711280946,48.63,836200,40698613,48.67],[201711280947,48.68,895800,43599063,48.67],[201711280948,48.71,927738,45153396,48.67],[201711280949,48.75,1005138,48921663,48.67],[201711280950,48.73,1055338,51367340,48.67],[201711280951,48.83,1125238,54774939,48.68],[201711280952,48.91,1239138,60343865,48.70],[201711280953,48.89,1289438,62803732,48.71],[201711280954,48.83,1376138,67042891,48.72],[201711280955,48.84,1394438,67936853,48.72],[201711280956,48.78,1428038,69577548,48.72],[201711280957,48.80,1463338,71299035,48.72],[201711280958,48.80,1477938,72011148,48.72],[201711280959,48.82,1507438,73450784,48.73],[201711281000,48.78,1525938,74353586,48.73],[201711281001,48.82,1551439,75597810,48.73],[201711281002,48.81,1567739,76393470,48.73],[201711281003,48.60,1663000,81037061,48.73],[201711281004,48.69,1689100,82306137,48.73],[201711281005,48.63,1710300,83337261,48.73],[201711281006,48.63,1743700,84961446,48.72],[201711281007,48.61,1769100,86196556,48.72],[201711281008,48.63,1803100,87848975,48.72],[201711281009,48.58,1825300,88927704,48.72],[201711281010,48.63,1864200,90818112,48.72],[201711281011,48.63,1878000,91489289,48.72],[201711281012,48.54,1924000,93724586,48.71],[201711281013,48.44,1983600,96615355,48.71],[201711281014,48.25,2018100,98283202,48.70],[201711281015,48.37,2128524,103615115,48.68],[201711281016,48.38,2181624,106184930,48.67],[201711281017,48.36,2228424,108447761,48.67],[201711281018,48.35,2293324,111583909,48.66],[201711281019,48.46,2325224,113127126,48.65],[201711281020,48.40,2352724,114457673,48.65],[201711281021,48.27,2397124,116603310,48.64],[201711281022,48.25,2440024,118673965,48.64],[201711281023,48.24,2509924,122045220,48.63],[201711281024,48.35,2541624,123575765,48.62],[201711281025,48.38,2557924,124364086,48.62],[201711281026,48.32,2599524,126375602,48.61],[201711281027,48.30,2660924,129340509,48.61],[201711281028,48.39,2696024,131037718,48.60],[201711281029,48.45,2710024,131715668,48.60],[201711281030,48.44,2729524,132660347,48.60],[201711281031,48.44,2741924,133260633,48.60],[201711281032,48.44,2756924,133987042,48.60],[201711281033,48.38,2779224,135065352,48.60],[201711281034,48.33,2799824,136060843,48.60],[201711281035,48.33,2812848,136690306,48.59],[201711281036,48.33,2825348,137294500,48.59],[201711281037,48.30,2854148,138685781,48.59],[201711281038,48.28,2883624,140109147,48.59],[201711281039,48.25,2914614,141604499,48.58],[201711281040,48.30,2952638,143439380,48.58],[201711281041,48.31,2971838,144367088,48.58],[201711281042,48.34,2984838,144995179,48.58],[201711281043,48.34,3018538,146624063,48.57],[201711281044,48.40,3029038,147131872,48.57],[201711281045,48.40,3033838,147364170,48.57],[201711281046,48.41,3048338,148066034,48.57],[201711281047,48.44,3061938,148724732,48.57],[201711281048,48.47,3070438,149136601,48.57],[201711281049,48.55,3115238,151310133,48.57],[201711281050,48.53,3136038,152319608,48.57],[201711281051,48.60,3153338,153159427,48.57],[201711281052,48.54,3177038,154310750,48.57],[201711281053,48.55,3206938,155762541,48.57],[201711281054,48.55,3214838,156146121,48.57],[201711281055,48.52,3225038,156641335,48.57],[201711281056,48.51,3242938,157509519,48.57],[201711281057,48.52,3257238,158203204,48.57],[201711281058,48.44,3283438,159473337,48.57],[201711281059,48.44,3292538,159914211,48.57],[201711281100,48.42,3304938,160514918,48.57],[201711281101,48.59,3347038,162557229,48.57],[201711281102,48.68,3368338,163593226,48.57],[201711281103,48.64,3394238,164853637,48.57],[201711281104,48.56,3404038,165329693,48.57],[201711281105,48.60,3413638,165796206,48.57],[201711281106,48.63,3419538,166083079,48.57],[201711281107,48.66,3438838,167022653,48.57],[201711281108,48.54,3473338,168701072,48.57],[201711281109,48.55,3484099,169223856,48.57],[201711281110,48.50,3496938,169846579,48.57],[201711281111,48.49,3503438,170161772,48.57],[201711281112,48.60,3517599,170849427,48.57],[201711281113,48.65,3537899,171836938,48.57],[201711281114,48.62,3550399,172445058,48.57],[201711281115,48.62,3566599,173233033,48.57],[201711281116,48.62,3571999,173495592,48.57],[201711281117,48.61,3585099,174132723,48.57],[201711281118,48.60,3638499,176728181,48.57],[201711281119,48.58,3649499,177262313,48.57],[201711281120,48.58,3656799,177617006,48.57],[201711281121,48.65,3688599,179162959,48.57],[201711281122,48.66,3699899,179712888,48.57],[201711281123,48.74,3731599,181256599,48.57],[201711281124,48.60,3747899,182050074,48.57],[201711281125,48.60,3755899,182438834,48.57],[201711281126,48.59,3773099,183274646,48.57],[201711281127,48.58,3789299,184061736,48.57],[201711281128,48.56,3794099,184294831,48.57],[201711281129,48.59,3797399,184455131,48.57],[201711281130,48.56,3801399,184649421,48.57],[201711281301,48.59,3849999,187010033,48.57],[201711281302,48.60,3889199,188915096,48.57],[201711281303,48.60,3893499,189124045,48.57],[201711281304,48.60,3897299,189308689,48.57],[201711281305,48.63,3903299,189600445,48.57],[201711281306,48.61,3915599,190198580,48.57],[201711281307,48.60,3926299,190718592,48.57],[201711281308,48.58,3933799,191083043,48.57],[201711281309,48.50,3949899,191864021,48.57],[201711281310,48.51,3966899,192688279,48.57],[201711281311,48.56,3978199,193236797,48.57],[201711281312,48.51,3984199,193528033,48.57],[201711281313,48.51,4000499,194318751,48.57],[201711281314,48.51,4021099,195318183,48.57],[201711281315,48.54,4039399,196206110,48.57],[201711281316,48.58,4046399,196545999,48.57],[201711281317,48.67,4053199,196876758,48.57],[201711281318,48.69,4064199,197412346,48.57],[201711281319,48.72,4127499,200496188,48.58],[201711281320,48.74,4150999,201641434,48.58],[201711281321,48.80,4216999,204861351,48.58],[201711281322,48.78,4237599,205866406,48.58],[201711281323,48.80,4257499,206837508,48.58],[201711281324,48.70,4319199,209846118,48.58],[201711281325,48.68,4334599,210595863,48.58],[201711281326,48.76,4376999,212660755,48.59],[201711281327,48.79,4386799,213138821,48.59],[201711281328,48.83,4415999,214564135,48.59],[201711281329,48.88,4495699,218458982,48.59],[201711281330,48.95,4548199,221027729,48.60],[201711281331,49.00,4659159,226462847,48.61],[201711281332,48.95,4714699,229184521,48.61],[201711281333,48.92,4741199,230481434,48.61],[201711281334,48.88,4775899,232177947,48.61],[201711281335,48.92,4797199,233219596,48.62],[201711281336,48.99,4884399,237489716,48.62],[201711281337,48.90,4946699,240542234,48.63],[201711281338,48.90,4977699,242058731,48.63],[201711281339,48.90,5008999,243589320,48.63],[201711281340,49.01,5066499,246405016,48.63],[201711281341,49.13,5156799,250834261,48.64],[201711281342,49.20,5262899,256052831,48.65],[201711281343,49.16,5370899,261366324,48.66],[201711281344,49.15,5416899,263627053,48.67],[201711281345,49.06,5467399,266107949,48.67],[201711281346,49.05,5513199,268355036,48.68],[201711281347,49.10,5537666,269555813,48.68],[201711281348,49.06,5677866,276437769,48.69],[201711281349,48.98,5706399,277836413,48.69],[201711281350,48.86,5728499,278916819,48.69],[201711281351,48.88,5809199,282863194,48.69],[201711281352,48.89,5927999,288668888,48.70],[201711281353,48.78,6017699,293045922,48.70],[201711281354,48.79,6065599,295380843,48.70],[201711281355,48.80,6130699,298554699,48.70],[201711281356,48.93,6184599,301187928,48.70],[201711281357,49.06,6244299,304112821,48.70],[201711281358,49.14,6284303,306075588,48.70],[201711281359,49.10,6341503,308885325,48.71],[201711281400,49.08,6356903,309641012,48.71],[201711281401,49.12,6386003,311069742,48.71],[201711281402,49.12,6440003,313722571,48.71],[201711281403,49.04,6478599,315615171,48.72],[201711281404,49.10,6546603,318950223,48.72],[201711281405,49.06,6606499,321889404,48.72],[201711281406,49.02,6662399,324630161,48.73],[201711281407,49.05,6688599,325914272,48.73],[201711281408,49.05,6776399,330220746,48.73],[201711281409,49.04,6803099,331529975,48.73],[201711281410,49.09,6860199,334329629,48.73],[201711281411,49.06,6876699,335139332,48.74],[201711281412,49.06,6914263,336982171,48.74],[201711281413,49.08,6928063,337659227,48.74],[201711281414,49.08,6967863,339611490,48.74],[201711281415,49.07,7008763,341618309,48.74],[201711281416,49.19,7104963,346344169,48.75],[201711281417,49.09,7169563,349515731,48.75],[201711281418,49.00,7231663,352559531,48.75],[201711281419,48.89,7280563,354949605,48.75],[201711281420,48.97,7419463,361733777,48.75],[201711281421,48.99,7444563,362963069,48.76],[201711281422,49.00,7502063,365780356,48.76],[201711281423,49.00,7522363,366774572,48.76],[201711281424,48.98,7561063,368670087,48.76],[201711281425,49.03,7608163,370977687,48.76],[201711281426,49.20,7648863,372978415,48.76],[201711281427,49.20,7754463,378174510,48.77],[201711281428,49.13,7800263,380425852,48.77],[201711281429,49.20,7819337,381363996,48.77],[201711281430,49.20,7892237,384950716,48.78],[201711281431,49.18,7928137,386716593,48.78],[201711281432,49.18,7965737,388566123,48.78],[201711281433,49.23,7996373,390073531,48.78],[201711281434,49.40,8112239,395785872,48.79],[201711281435,49.38,8257239,402952274,48.80],[201711281436,49.32,8314239,405766480,48.80],[201711281437,49.36,8360239,408036857,48.81],[201711281438,49.38,8407139,410352493,48.81],[201711281439,49.30,8444939,412217943,48.81],[201711281440,49.30,8470539,413480251,48.81],[201711281441,49.24,8526639,416243466,48.82],[201711281442,49.30,8549339,417361405,48.82],[201711281443,49.39,8605339,420124103,48.82],[201711281444,49.46,8648439,422254204,48.82],[201711281445,49.60,8928315,436114475,48.85],[201711281446,49.48,9020139,440666190,48.85],[201711281447,49.48,9068439,443055760,48.86],[201711281448,49.44,9143339,446758733,48.86],[201711281449,49.47,9164939,447826903,48.86],[201711281450,49.47,9230639,451077520,48.87],[201711281451,49.50,9244039,451740866,48.87]]}}}');
    trend = trend.data.trend['600570.SS'];
    var volumes = [];
    var colors = [];
    // console.log(trend);
    var ss = [];
    for (var i = 0; i < trend.length; i++) {
        ss.push(trend[i][1]);
        if (i === 0) {
            volumes.push(trend[i][2]);
        } else {
            volumes.push(trend[i][2] - trend[i - 1][2]);
            colors.push(trend[i][1] - trend[i - 1][1] > 0 ? '#00b83d' : '#f52430');
        }
    }
    console.log(ss);
    var trendCvs = document.getElementsByClassName('trend')[0];
    var Trend = (function() {
        function Trend(trendCvs, options) {
            var width = trendCvs.offsetWidth;
            var height = trendCvs.offsetHeight;
            trendCvs.width = width * window.devicePixelRatio;
            trendCvs.height = height * window.devicePixelRatio;
            this.ctx = trendCvs.getContext('2d');

            this.width = width * window.devicePixelRatio;
            this.height = height * window.devicePixelRatio;
            var gridLine = {
                x: 4,
                y: 4,
                color: '#ccc'
            }
            this.drawGridLine(gridLine);
            this.drawPriceLine();
            this.drawVolumeLine();
            this.ctx.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio)
        }
        Trend.prototype.drawGridLine = function(gridLine) {
            var ctx = this.ctx;
            ctx.beginPath();
            ctx.moveTo(0, 0);

            ctx.lineTo(0, this.height * 2);
            ctx.lineTo(this.width, this.height);
            ctx.lineTo(this.width, 0);
            ctx.lineTo(0, 0);
            for (var i = 1; i < gridLine.x; i++) {
                ctx.moveTo(0.5, this.height / gridLine.x * i + 0.5);
                ctx.lineTo(this.width + 0.5, this.height / gridLine.x * i + 0.5);
            }
            for (var j = 1; j < gridLine.y; j++) {
                ctx.moveTo(this.width / gridLine.y * j + 0.5, 0.5);
                ctx.lineTo(this.width / gridLine.y * j + 0.5, this.height + 0.5);
            }
            ctx.strokeStyle = gridLine.color;
            ctx.stroke();
        }
        Trend.prototype.drawPriceLine = function() {
            var prices = ss;
            var preClosePrice = 48.33; // 昨收价
            var maxPrice = Math.max.apply(null, prices);
            var minPrice = Math.min.apply(null, prices);
            var maxDiff = Math.abs(maxPrice - preClosePrice);
            var minDiff = Math.abs(preClosePrice - minPrice);
            var unitX = this.width / (60 * 4);
            var unitY;
            var isSuspended = false;
            var isFlat = false;
            console.log(maxPrice + "  " + minPrice);
            console.log(maxDiff + "  " + minDiff);
            if (maxDiff >= minDiff) {
                if (maxPrice !== preClosePrice) {
                    // alert();
                    unitY = this.height / ((maxPrice - preClosePrice) * 2);
                    // console.log(123456);
                    this.roofPrice = maxPrice;
                    this.floorPrice = preClosePrice * 2 - maxPrice;
                }else {
                	// 停牌的情况
                    this.roofPrice = preClosePrice * 1.02;
                    this.floorPrice = preClosePrice * 0.98;
                    isSuspended = true;
                }
            } else {
                unitY = this.height / ((preClosePrice - minPrice) * 2);
                this.roofPrice = (preClosePrice - minPrice) * 2 + minPrice;

                this.floorPrice = minPrice;
                // console.error(this.floorPrice);
            }
            var points = [];
            var that = this;
            var calcY = function(price) {
                if(isSuspended) {
                   // return figureOffsetHeight / 2 + figureOffsetY;
                } else if (isFlat) {
                    // return figureOffsetY;
                } else {
                    // console.log(that.floorPrice);
                    return that.height - Math.abs(price - that.floorPrice) * unitY;
                }
            };

            for (let i = 0; i < prices.length; i++) {
                points.push([i * unitX, calcY(prices[i])]);
            }
            this.ctx.beginPath();
            this.ctx.strokeStyle = '#115ff4';
            for (let i = 0; i < points.length; i++) {
                // console.log(points[i][0]+  '   '+points[i][1]  );
                this.ctx.lineTo(points[i][0], points[i][1]);
            }
            this.ctx.stroke();
            this.ctx.lineTo(points[i - 1][0], this.height);
            this.ctx.lineTo(0, this.height);
            this.ctx.fillStyle = 'rgba(159,222,255 , 0.5)'
            this.ctx.fill();
            /* this.drawLine({
                color: '#ff0000',
                size: 1,
                startPoint: [0, calcY(prices[0])],
                points: points
            }); */
        };
        // 画均线
        Trend.prototype.drawMiddleLine = function() {

        };
        // 画量线
        Trend.prototype.drawVolumeLine = function() {
            var kLineCvs = document.getElementsByClassName('kLine')[0];
            var width = kLineCvs.offsetWidth;
            var height = kLineCvs.offsetHeight;
            kLineCvs.width = width * window.devicePixelRatio;
            kLineCvs.height = height * window.devicePixelRatio;
            this.kCtx = kLineCvs.getContext('2d');

            width = width * window.devicePixelRatio;
            height = height * window.devicePixelRatio;

            var maxVolume = Math.max.apply(null, volumes);
            var minVolume = Math.min.apply(null, volumes);

            var volumeUnitY = (height) / (maxVolume - minVolume);
            var unitX = width / (60 * 4);
            for (var i = 0; i < volumes.length; i++) {
                this.kCtx.beginPath();
                this.kCtx.moveTo(Math.round(unitX * i) + 0.5, height);
                console.log(volumes[i].volume);
                this.kCtx.lineTo(Math.round(unitX * i) + 0.5, height - (volumes[i] - minVolume) * volumeUnitY);
                this.kCtx.strokeStyle = colors[i];
                this.kCtx.stroke();
            }
            this.kCtx.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio)
                // this.kCtx.stroke();
        }
       	return Trend;
    })();

    this.trend = new Trend(trendCvs, {});
    // alert(document.body.offsetWidth);
    //   
    // alert(window.devicePixelRatio)
    }
		}
</script>
<style>
	 .jyhq-type {
            background-color: #fff;
            overflow: hidden;
            border-bottom: 1px solid #e9e9e9;
            height: .7rem;
        }
        
        .jyhq-type ul li {
            box-sizing: border-box;
            height: .7rem;
            line-height: .7rem;
            float: left;
            color: #2e2f33;
            border-bottom: 3px solid #fff;
            font-size: .25rem;
            text-align: center;
        }
        
        .jyhq-type ul li a {
            color: #2e2f33;
        }
        
        .jyhq-type ul li.active {
            border-bottom-color: #22ac38;
        }
        
        .dapan-info {
            height: 1.7rem;
            background-color: #fff;
            border-bottom: 1px solid #e9e9e9;
        }
        
        .dapan-info .dapan-info-left {
            width: 3.2rem;
            float: left;
            padding: .15rem 0 0 .3rem;
        }
        
        .dapan-info .dapan-info-left h1 {
            font-size: .7rem;
            color: #ff0000;
            margin: 0 0 .08rem 0;
        }
        
        .dapan-info .dapan-info-left h5 {
            margin: 0;
            font-size: .25rem;
            color: #ff0000;
        }
        
        .dapan-info .dapan-info-left h5 span:first-child {
            margin-right: .25rem;
        }
        
        .dapan-info .dapan-info-right {
            margin-left: 3.2rem;
        }
        
        .dapan-info .dapan-info-right ul li {
            float: left;
            font-size: .2rem;
            padding: .18rem 0 .05rem;
            color: #2e2f33;
            line-height: 1.2;
        }
        
        .dapan-info .dapan-info-right ul li strong {
            font-size: .25rem;
            display: block;
        }
        
        .dapan-info-more {
            height: .9rem;
            background-color: #fff;
            border-bottom: 1px solid #e9e9e9;
        }
        
        .dapan-info-more ul li {
            text-align: center;
            float: left;
            font-size: .2rem;
            padding: .18rem 0 .05rem;
            color: #2e2f33;
            line-height: 1.3;
        }
        
        .dapan-info-more ul li strong {
            font-size: .25rem;
            display: block;
        }
        
        .jjpan {
            margin-bottom: .1rem;
            overflow: hidden;
        }
        
        .jjpan .jjpan-left {
            float: left;
            background-color: #fff;
            width: 2.9rem;
            padding: 0 .27rem .15rem;
            height: 5.7rem;
        }
        
        .jjpan .jjpan-right {
            width: 4.5rem;
            float: right;
            background-color: #fff;
            padding: 0 .27rem;
            height: 5.7rem;
        }
        
        .wudang {
            width: 100%;
            font-size: .18rem;
        }
        
        .wudang .caption {
            height: .54rem;
            padding-top: .14rem;
            font-size: .2rem;
            border-bottom: 1px solid #b4bbd6;
        }
        
        .wudang td {
            height: 0.46rem;
        }
        
        .wudang th {
            font-weight: 300;
            height: .54rem;
            border-bottom: 1px solid #b4bbd6;
        }
        
        .jjpan-buy {
            margin-top: .3rem;
            overflow: hidden;
        }
        
        .jjpan-buy ul li {
            height: .8rem;
            border-bottom: 1px solid #e5e5e5;
            padding-top: .3rem;
        }
        
        .jjpan-buy ul li span {
            font-size: .25rem;
            float: left;
        }
        
        .jjpan-buy ul li input {
            font-size: .2rem;
            float: left;
            text-align: center;
            width: 2.7rem;
            border: none;
        }
        
        .jjpan-buy ul li.btn {
            border-bottom: none;
            height: 1.3rem;
            padding-top: .3rem;
        }
        
        .jjpan-buy ul li.btn button {
            width: 100%;
            float: left;
            height: .8rem;
            border-radius: .06rem;
            font-size: .25rem;
            color: #fff;
            background: -webkit-linear-gradient(#324fff, #1d2088);
            border: none;
            box-shadow: 0 1px 4px 0 #5887ff;
        }
</style>
